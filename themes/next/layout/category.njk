{% extends '_layout.njk' %}
{% import '_macro/sidebar.njk' as sidebar_template with context %}

{% block title %}{{ __('title.category') }}: {{ page.category }} | {{ title }}{% endblock %}

{% block class %}category posts-collapse{% endblock %}

{% block content %}

  {######################}
  {### CATEGORY BLOCK ###}
  {######################}
  <div class="post-block">
    <div class="post-content">
      <div class="collection-title">
        <h1 class="collection-header">
          {{- page.category }}
          <small>{{ __('title.category') }}</small>
        </h1>
      </div>

      {%- for post in page.posts.toArray() %}
      <article itemscope itemtype="http://schema.org/Article">
        <header class="post-header">
          <div class="post-meta-container">
            <time itemprop="dateCreated"
                  datetime="{{ moment(post.date).format() }}"
                  content="{{ date(post.date, config.date_format) }}">
              {{ date(post.date, 'MM-DD') }}
            </time>
          </div>
          <div class="post-title">
            {%- if post.link %}{# Link posts #}
              {%- set postTitleIcon = '<i class="fa fa-external-link-alt"></i>' %}
              {%- set postText = post.title or post.link %}
              {{ next_url(post.link, postText + postTitleIcon, {class: 'post-title-link post-title-link-external', itemprop: 'url'}) }}
            {% else %}
              <a class="post-title-link" href="{{ url_for(post.path) }}" itemprop="url">
                <span itemprop="name">{{ post.title or __('post.untitled') }}</span>
              </a>
            {%- endif %}
          </div>
        </header>
      </article>
      {%- endfor %}
    </div>
  </div>
  {##########################}
  {### END CATEGORY BLOCK ###}
  {##########################}

{% endblock %}

{% block sidebar %}
  {{ sidebar_template.render(false) }}
{% endblock %}
